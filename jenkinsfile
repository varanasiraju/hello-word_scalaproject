pipeline {
    agent any

    stage('compile-package'){
        def sbtHome = tool name: '1.3.3', type: 'org.jvnet.hudson.plugins.SbtPluginBuilder$SbtInstallation'
        sh "${sbtHome}/bin/sbt package"

    }
    
    stage('compile-package'){
        def sbtHome = tool name: '1.3.3', type: 'org.jvnet.hudson.plugins.SbtPluginBuilder$SbtInstallation'
        sh "${sbtHome}/bin/sbt clean coverage test"
    
        
    }
   stage('compile-package'){
        def sbtHome = tool name: '1.3.3', type: 'org.jvnet.hudson.plugins.SbtPluginBuilder$SbtInstallation'
        sh "${sbtHome}/bin/sbt coverageReport"
    
    step([$class: 'ScoveragePublisher', reportDir: 'target/scala-2.12/scoverage-report', reportFile: 'scoverage.xml'])   
    }   

}
